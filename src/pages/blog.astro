---
import { getCollection } from "astro:content";
import FirstPostCard from "../components/FirstPostCard.astro";
import PostCard from "../components/PostCard.astro";
import BaseLayout from "../layouts/BaseLayout.astro";
import "../styles/global.css";

const allPosts = await getCollection("posts");
const sortedPosts = allPosts.sort(
  (a, b) => b.data.pubDate.valueOf() - a.data.pubDate.valueOf()
);
const firstPost = sortedPosts.shift();
const pageTitle = "Blog";
---

<BaseLayout pageTitle={pageTitle}>
  <FirstPostCard post={firstPost} />
  <div class="grid gap-4">
    {sortedPosts.map((post) => <PostCard post={post} />)}
  </div>
</BaseLayout>
