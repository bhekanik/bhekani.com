---
import "@fontsource-variable/jetbrains-mono"
import "@fontsource/ibm-plex-sans"

import { AstroSeo } from "@astrolib/seo"
import { ClientRouter } from "astro:transitions"
import Footer from "../components/Footer.astro"
import Header from "../components/Header.astro"
import PostHog from "../components/PostHog.astro"
import { SEO_DEFAULTS } from "../constants/seo"
import "../styles/global.css";

const { pageTitle, description, title, imageUrl } = Astro.props
---

<html lang="en" class="dark">
  <head>
    <meta charset="utf-8" />
    <link rel="sitemap" href="/sitemap-index.xml" />
    <link rel="icon" type="image/svg+xml" href="/favicon.svg" />
    <meta name="viewport" content="width=device-width" />
    <meta name="generator" content={Astro.generator} />
    <link
      rel="webmention"
      href="https://webmention.io/www.bhekani.com/webmention"
    />
    <link rel="pingback" href="https://webmention.io/www.bhekani.com/xmlrpc" />

    <title>{pageTitle} | {SEO_DEFAULTS.SITE_NAME}</title>
    <ClientRouter />
    <PostHog />
    <AstroSeo
      title={pageTitle}
      description={description ?? SEO_DEFAULTS.DEFAULT_DESCRIPTION}
      canonical={`https://www.bhekani.com${Astro.url.pathname}`}
      openGraph={{
        url: `https://www.bhekani.com${Astro.url.pathname}`,
        title: title ?? pageTitle,
        description: description ?? SEO_DEFAULTS.DEFAULT_DESCRIPTION,
        images: [
          {
            url: imageUrl ?? SEO_DEFAULTS.DEFAULT_OG_IMAGE_URL,
            width: SEO_DEFAULTS.OG_IMAGE_WIDTH,
            height: SEO_DEFAULTS.OG_IMAGE_HEIGHT,
            alt: `${title ?? pageTitle} - ${SEO_DEFAULTS.SITE_NAME}`,
            type: "image/jpeg",
          },
        ],
        site_name: SEO_DEFAULTS.SITE_NAME,
        type: "website",
        locale: "en_US",
      }}
      twitter={{
        handle: SEO_DEFAULTS.TWITTER_HANDLE,
        site: SEO_DEFAULTS.TWITTER_HANDLE,
        cardType: "summary_large_image",
      }}
    />
    <style is:global>
      :root {
        /* Light theme - warm, peaceful colors */
        --background: 35 30% 95.7%;
        --foreground: 240 10% 3.9%;
        --card: 35 25% 97%;
        --card-foreground: 240 10% 3.9%;
        --popover: 35 25% 97%;
        --popover-foreground: 240 10% 3.9%;
        --primary: 220 65% 45%;
        --primary-foreground: 35 25% 97%;
        --secondary: 35 15% 90%;
        --secondary-foreground: 240 10% 3.9%;
        --muted: 35 15% 90%;
        --muted-foreground: 240 8% 45%;
        --accent: 35 15% 90%;
        --accent-foreground: 240 10% 3.9%;
        --destructive: 0 75% 60%;
        --destructive-foreground: 35 25% 97%;
        --border: 35 15% 85%;
        --input: 35 15% 85%;
        --ring: 220 65% 45%;
        --radius: rem;

        --links: 220 65% 45%;
        --links-hovered: 220 65% 35%;
      }

      :root.dark {
        /* Dark theme - softer, calming dark colors */
        --background: 225 25% 15%;
        --foreground: 35 15% 95%;
        --card: 225 25% 17%;
        --card-foreground: 35 15% 95%;
        --popover: 225 25% 17%;
        --popover-foreground: 35 15% 95%;
        --primary: 220 65% 65%;
        --primary-foreground: 225 25% 15%;
        --secondary: 225 25% 20%;
        --secondary-foreground: 35 15% 95%;
        --muted: 225 25% 20%;
        --muted-foreground: 35 15% 75%;
        --accent: 225 25% 20%;
        --accent-foreground: 35 15% 95%;
        --destructive: 0 75% 45%;
        --destructive-foreground: 35 15% 95%;
        --border: 225 25% 25%;
        --input: 225 25% 25%;
        --ring: 220 65% 65%;

        --links: 199 75% 75%;
        --links-hovered: 199 75% 85%;
      }

      html {
        background-color: hsl(var(--background));
        font-family: "IBM Plex Sans", sans-serif;
        color: hsl(var(--foreground));
      }

      code,
      pre {
        font-family: "JetBrains Mono", monospace;
      }

      h1,
      h2,
      h3,
      h4,
      h5,
      h6 {
        font-family: "Oswald", cursive;
      }

      p {
        font-size: 1.125rem;
        line-height: 1.75;
        margin-bottom: 1rem;
      }

      body {
        display: grid;
        grid-template:
          "header" auto
          "page-header" auto
          "main" 1fr
          "footer" auto;
        width: 100%;
        min-height: 100svh;
        line-height: 1.5;
      }

      * {
        box-sizing: border-box;
      }

      h1,
      h2,
      h3,
      h4,
      h5,
      h6 {
        line-height: 1.1;
      }
    </style>
    <style>
      .skip-link {
        position: absolute;
        top: -40px;
        left: 0;
        background: hsl(var(--primary));
        color: hsl(var(--primary-foreground));
        padding: 8px;
        text-decoration: none;
        z-index: 100;
        border-radius: 0 0 4px 0;
      }
      
      .skip-link:focus {
        top: 0;
      }
    </style>
  </head>
  <body>
    <a href="#main-content" class="skip-link">Skip to main content</a>
    <Header />
    <h1
      class="flex flex-col gap-2 page-header text-center text-5xl p-8 border-b-[1px] border-[hsl(var(--muted))] uppercase"
    >
      {title ?? pageTitle}
      <span class="text-sm lowercase">{description}</span>
    </h1>
    <main id="main-content">
      <slot />
    </main>
    <Footer />
  </body>
</html>
