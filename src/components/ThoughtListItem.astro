---
import type { CollectionEntry } from "astro:content";
import { format } from "date-fns";
import Link from "./Link.astro";
import Tag from "./Tag.astro";

type Props = {
  thought: CollectionEntry<"thoughts">;
};

const { thought } = Astro.props;

const url = `/thoughts/${thought.slug}/`;
const title = thought.data.title;
const date = thought.data.pubDate;
const tags = thought.data.tags;
---

<li>
  <div>
    <Link href={url}>
      {title}
    </Link>

    <time
      class="ml-2 text-sm whitespace-nowrap text-[hsl(var(--muted-foreground))]"
      >{format(date, "MMMM dd, yyyy")}
    </time>
  </div>

  {
    thought.data.description && (
      <p
        transition:name={`description-${thought.slug}`}
        class="text-[hsl(var(--muted-foreground))]"
      >
        <em>{thought.data.description}</em>
      </p>
    )
  }

  <div class="flex flex-wrap gap-4">
    {tags.map((tag: string) => <Tag tag={tag} />)}
  </div>
</li>
