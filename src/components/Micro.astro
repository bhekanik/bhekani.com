---
import type { CollectionEntry } from "astro:content"
import { format } from "date-fns"
import Prose from "./Prose.astro"
import Card from "./Card.astro"

type Props = {
  micro: CollectionEntry<"micro">
}

const {
  micro: {
    slug,
    data: { title, date },
  },
  micro,
} = Astro.props

const { Content } = await micro.render()
---

<Card variant="bordered" hover class="max-w-[80ch] p-[var(--space-6)]">
  <div class="pb-[var(--space-4)] mb-[var(--space-4)] border-b border-[hsl(var(--border))]">
    <a href={`/micro/${slug}/`} class="block hover:bg-transparent">
      <h2 transition:name={`title-${slug}`} class="text-xl font-semibold mb-[var(--space-2)] hover:text-[hsl(var(--primary))] transition-colors duration-[var(--transition-fast)]">{title}</h2>
    </a>
    <time
      transition:name={`date-${slug}`}
      class="text-sm text-[hsl(var(--muted-foreground))]"
      datetime={date.toISOString()}
    >
      {format(date, "MMMM dd, yyyy")}
    </time>
  </div>

  <Prose>
    <Content class="content" />
  </Prose>
</Card>
